;Counting number of one's in a word

	AREA RESET, CODE, READONLY
	EXPORT __Vectors
__Vectors
	DCD 0X10001000
	DCD Reset_Handler
	ALIGN
	AREA MYCODE, CODE, READONLY
	ENTRY
	EXPORT Reset_Handler
Reset_Handler
	LDR R0,=WORD
	LDR R0,[R0]
	
	MOV R1,#0XF	;MASK
	MOV R3,#0
	
UP	AND R2,R0,R1
	CMP R2,#1
	BNE CHECK
	ADD R3,#1
CHECK
	LSR R0,#4
	CMP R0,#0
	BNE UP

	LDR R0,=RESULT
	STR R3, [R0]

STOP
	B STOP
WORD DCD 0X00146111
	AREA MYDATA, DATA, READWRITE
RESULT DCD 0
	END